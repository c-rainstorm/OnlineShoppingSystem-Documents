@startuml

(*) --> "用户进入订单管理界面"
--> "系统以逆时间序方式显示所有订单"
--> ===B1===

partition 订单评价 {
  ===B1=== --> "用户选择已完成订单并评价商品"
  --> "重计算商铺评价等级" as A1
  --> "商品评价 +"
  --> "系统提示评价成功" as A2
}

partition 确认收货 {
  ===B1=== --> "用户点击确定收货按钮"
  --> "订单状态变为待评价"
  --> "系统提示填写评价"

  if "" then
    -->[用户填写了评价] A1
  else
    -->[用户没有填写评价\n 关闭了页面] "商铺评价等级不变" as A3
  endif
}

partition 历史查询 {
  ===B1=== --> if "" then
    -->[用户输入关键词搜索] "系统搜索并以逆时间序方式显示\n其中商品符合关键词的订单" as A5
    --> ===B3===
  else
    -->[用户不手动搜索] ===B3===
  endif
}

A2 --> ===B2===
A3 --> ===B2===
===B3=== --> ===B2===

===B2=== --> (*)

@enduml

