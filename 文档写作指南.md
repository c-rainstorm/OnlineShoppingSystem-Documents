
# 文档写作与协作指南

本文档不仅是一份写作和协作指导，而且是一份可以用来参考的模板。在文档写作过程中，如遇到本指导文档没有提及的编写风格问题或语法格式的问题，可以参考本指导文档源码。

---

<!-- vscode-markdown-toc -->
1. [使用 Markdown 进行编写](#Markdown-0)

	1.1. [Markdown 参考资料](#Markdown-1)

	1.2. [Markdown 编辑器](#Markdown-2)

2. [使用 Git 进行文档版本控制和协作管理](#Git-3)

3. [文档编写规范](#-4)

	3.1. [最多允许三级的文档结构](#-5)

	3.2. [不要为章节手动编号](#-6)

	3.3. [段落间空行、段落内不允许换行](#-7)

4. [遵守文档自带的『本文档规范』](#-8)

5. [对不符合规范的文档及修改处理方案](#-9)

	5.1. [对于不符合规范的文档以及修改，将驳回处理。](#-10)


<!-- /vscode-markdown-toc -->

---

##  1. <a name='Markdown-0'></a>使用 Markdown 进行编写

Markdown 是一个 『easy-to-read, easy-to-write』 的轻量级标记语言。为保证文档结构上的清晰和标记的规范，**所有**需要协作的文档拟定使用纯文本 Markdown 编写，并使用 Git 进行版本管理和协作辅助。禁止书写 Word 文档后上传。

为确保所有文档中的插图都有原件：

- 普通示意图（.jpg/.png)上传至 images 文件夹后使用 Markdown `![Alt text](../images/path-to-image)` 的方式插入 Markdown 文件中。
- 数据库设计阶段导出的图表以及面向对象设计阶段的 UML 导出的图表（.jpg/.png）上传至 images 文件夹后使用 Markdown `![Alt text](path-to-image)` 的方式插入 Markdown 文档中；
- 图表原件以及数据库设计的原图以及 UML 图上传至『软件设计原图』文件夹中（供存档和实时更新使用，若要修改，遵循文档修改规范/文档修改工作流）。

课程设计最后要上交的设计文档可以使用 [Pandoc](http://pandoc.org/) 对 Markdown 文档进行自动处理使其生成 Docx / LaTeX 文档。所以可以放心将所有的设计内容全部放到 GitHub 上，待到最后再自动生成 Docx/LaTeX 文档，不必担心最后要上交的设计文档。

###  1.1. <a name='Markdown-1'></a>Markdown 参考资料

Markdown 是一种没有标准约束的语言，我们现在接触到的 Markdown 编辑阅读器大多都与 SM（Standard Markdown）有轻微不同，属于 Markdown 变种。这次课程设计的文档我们将使用 GitHub Flavored Markdown（简称 GFM），它是 GitHub 对 SM 的轻微扩展，添加了表格和高亮代码块功能。

GitHub Help 中有关于 GFM 的介绍：

- [基本语法（Basic writing and formating syntax）](https://help.github.com/articles/basic-writing-and-formatting-syntax/)；
- [表格（Organizing information with tables）](https://help.github.com/articles/organizing-information-with-tables/)；
- [高亮代码块（Creating and highlighting code blocks）](https://help.github.com/articles/creating-and-highlighting-code-blocks/)。

GitHub Help 是英文的文档，阅读起来可能不太方便。这个主要是习惯问题，因为之前没有阅读过什么英文文档，所以刚开始看可能会有些心情烦躁，但这些都是正常现象，耐心读下去你慢慢就会发现自己的进步！如果实在不想看英文文档的话，可以使用这个中文应用作为 Markdown 语法学习和入门阶段练习的场地：[欢迎使用 Cmd Markdown 编辑阅读器](https://www.zybuluo.com/mdeditor)。但要注意，GFM 中并不具备 Cmd Markdown 中的 `LaTeX` `流程图` `序列图` `甘特图` 功能。这些都属于 Cmd Markdown 对 SM 的扩展，请勿在提交到 Github 上的 Markdown 文档中使用。

在文档实际写作过程中，可以将这个一页纸的 cheatsheet 打印出来放在桌子上便于参考 [Markdown cheatsheet](http://packetlife.net/media/library/16/Markdown.pdf)。

一般来说上面这些内容就足够了，如果想对 Markdown 有更深的了解，有以下文档可供参考（按次序由简入深）：

- [Offical Introduction](http://daringfireball.net/projects/markdown/)。Markdown 语言的作者 John Gruber 对 Markdown 设计哲学以及语法的介绍。
- [Markdown 语法说明](http://wowubuntu.com/markdown/index.html)。对每个 Markdown 标记对应的 HTML 进行介绍。
- [讲解 Markdown](http://ju.outofmemory.cn/entry/149460)。不仅涵盖 Markdown 的语法，而且在一个比较全面（涉及方面比较多的）的角度上对 Markdown 的实现和各种扩展以及工具进行介绍。

###  1.2. <a name='Markdown-2'></a>Markdown 编辑器

- 本项目选用编辑器 `VS code` 。`VS code` 是微软推出的一款功能强大的轻量级编辑器。
- 选用理由
    1. 它支持 Markdown 预览，并且可以手动配置任意的 Markdown 预览效果。为了能够看到 GitHub 上文档的效果，我们在本项目需要配置 github.css 来作为我们的 Markdown 预览效果，这样能很好的防止出现前后格式不一致的情况。
    2. 它内置 `git` 工具，方便将编辑后的文档，提交到 GitHub 。

// TODO VS code 配置 Markdown 预览效果的步骤
[vscode 配置自定义 Markdown 预览效果教程](https://code.visualstudio.com/docs/languages/markdown#_using-your-own-css)

##  2. <a name='Git-3'></a>使用 Git 进行文档版本控制和协作管理

参见『版本控制工具使用指南.md』。

##  3. <a name='-4'></a>文档编写规范

// TODO [商讨文档结构]

文档采用

```
`# 文档标题

---

序言

---

目录

---

`## 本文档规范

`## 章节 1

`### 小节

```

的结构。并有以下细则。

###  3.1. <a name='-5'></a>最多允许三级的文档结构

本课程设计文档中除使用 `#` 确定文档标题外，最多允许使用三级结构：`##` 作为章节，`###` 作为小节，`####` 作为小小节。并推荐使用有序列表，而不是 `######` 这样的多层次结构。如果你的文档中出现超过三级的结构，这普遍意味着结构混乱，请对文档结构进行重构。以上规定的原因如下：

Markdown 对多个 `#######` 的支持很容易**诱导**人们使用层次很深的文档结构，但层次性深的文档结构有如下问题：

1. 层次深的文档普遍结构混乱。
1. 应该当作列表的内容写成了 `######` 导致文档中出现很多只有一两行的零碎章节，不美观而且不利于文档结构组织（任何正规的文档/书籍中都不会出现超过四级的层次）。
1. Word/LaTeX 默认支持最多四级层次，在用 Pandoc 导出 Word/Latex 文档过程中将出现格式丢失，出现不可预测的格式，将耗费很大人力对整个文档进行结构重构。

但 Markdown 本身支持多段落列表，支持将多个段落写入同一个列表项中（具体语法规则参考 Markdown 学习资料）。

###  3.2. <a name='-6'></a>不要为章节手动编号

- 我们可以使用 VS code 插件 `Markdown TOC` 来自动生成目录
- 因为该插件不够完善，生成的目录还有些问题，我们需要对生成的目录进一步做处理。
    - 1. 去掉自动生成的编号
      - 方法：使用正则匹配并替换。
      - 操作步骤：
        1. 

###  3.3. <a name='-7'></a>段落间空行、段落内不允许换行

首先理清一个概念，换行不等于分段：

类似与在 Word 中：Enter 分段落，S-Enter 在一个段落中断行。在 Markdown（GitHub 所实现的版本）中源文件的：
  
- 两块文本块之间若有至少一个空行，两个文本块属于不同的段落。

  **比如：**
  
  ```
  这是段落 1.
  
  这是段落 2.
  ```
  
  **会导致：**
  
  这是段落 1.

  这是段落 2.

为避免文章零碎不齐，段落与行不清的情况，以及为了方便最后的文档导出，在试验了 GitHub 和 Pandoc 对 Markdown 的支持后，制定以下空行与断行规范：

1. 在一个段落内禁止换行。
1. 两段落之间必须加一个（最多不能超过两个）空白行；
1. 章节名与正文之间必须加一个且仅一个空白行；
1. 列表与正文之间加一个空白行。无论是有序列表还是无序列表，列表与上一个文本块之间，下一个文本块之间要加一个空白行；

##  4. <a name='-8'></a>遵守文档自带的『本文档规范』

每个文档的编写规范和格式要求不同。有特殊编写格式和修改需求的文档，目录和修改记录以下有『本文档规范』一章。在对文档修改和编写的时候要遵守文档自带的『本文档规范』。


##  5. <a name='-9'></a>对不符合规范的文档及修改处理方案

###  5.1. <a name='-10'></a>对于不符合规范的文档以及修改，将驳回处理。

